# 面经记录01

面试公司：**XTransfer**
面试职位：Java研发工程师
整体评价：很好
📈部门/业务：技术部门
📝面试题：一面
\* 自我介绍
\* Dubbo和Spring Cloud的区别
\* Dubbo和Spring Cloud注册中心的区别
\* Eureka数据保存在哪里，节点挂了数据会丢失吗
\* MySQL聚集索引和非聚集索引的区别
\* MySQL如何避免回表
\* MySQL普通索引字段，in会不会走索引
\* Redis平时都用来干啥
\* Redis限流怎么做
\* 实际应用中Redis是主从部署还是集群部署的，为什么不用集群部署
\* Redis集群，使用lua脚本会有啥问题
\* 除了Redis，还用过哪些NoSQL数据库，ES和HBase的区别
\* 算法题: m乘以n的格子，选其中一个节点(x,y)，从这个节点开始走k步，可以走出格子之外的走法总数
二面
\* 自我介绍
\* 项目详细设计、项目跟进、需求排期
\* 怎么保证代码质量?
\* 公司的技术栈
\* 公司Dubbo用的什么注册中心?为什么要双注册中心?
\* Zookeeper和Eureka的区别
\* Zookeeper脑裂了会怎样?恢复正常后，从节点如何跟上主节点?
\* Kafka和RocketMQ的区别?
\* RocketMQ事务消息的原理
\* 怎么保证消息顺序?
\* 怎么保证消息幂等?
\* MySQL分库分表用过没?

cto面试:项目和管理方面，没问细节技术和算法
⌛️面试流程：面试轮次：三轮
面试流程：
一面+技术leader

面谈二面+CTO

面谈三面+HR+面谈





**极兔**

面试者一

Java面试很好，共5轮面试

一面

- 快速排序
- 红黑树
- 如何倒计时执行任务
- 延迟队列如何实现
- 常见索引结构
- MySQL索引结构

二面

- 什么是SpringCloud
- SpringCloud常用组件有哪些
- SpringCloud中服务如何调用以及底层实现SpringCloud中服务寻址的过程和原理
- Spring的Bean装配
- Spring的优点
- Spring的@Autowired和@Resource区别
- 循环依赖如何解决什么是SpringBootSpringBoot自动装配原理
- ZK的应用场景
- ZK节点类型
- ZK的分布式锁实现
- ZAB协议两种模式
- Redis数据类型以及底层实现结构
- Redis的布隆过滤器
- Redis分布式锁实现
- Redis缓存穿透、击穿、雪崩
- 缓存重建数据库和缓存双写不一致问题
- JVM跨代引用实现
- JVM内存模型
- 垃圾收集器(serial parallel cms g1)
- ThreadLocal底层原理
- ThreadLocal和synchronized的区别
- 内存溢出和内存泄露线程池调优
- 有没有线上线程池调优

三面

- 项目介绍
- RabbitMQ消息不丢失、消息有序、消息堆积延迟队列如何实现
- 订单业务如何处理的
- Spring事务失效的场景



面试者二

### 二面

1、做的项目里哪个对自己提高最大？

2、聊了聊上家公司的微服务分层架构。

2、领域事件驱动和微服务的关系是什么？

3、为什么需要有微服务？

4、SpringCloud中，详述服务寻址的过程和原理。

5、Kafka的partition有什么意义，起到了什么作用。

6、生产者在发送数据的时候，如何路由到对应的partition？

7、主从同步的过程？

8、如果消费的过程，因为网络抖动一段时间没消费到数据，之后可能发生重复消费的情况，怎么处理？

9、Kafka数据持久化到磁盘的原理。

10、redis之所以这么快，并发数这么高，除了基于内存，还有什么原因？回答了io模型。

11、详述Redis的io模型。



面试者三

### 一面

> 自我评价：整体来说mysql的log日志、mq的底层理解有点模糊，然后要答到点上，不要答无关的东西显示自己理解有多深，不然就给自己挖坑而且让面试官感到厌烦，然后就是组织好语言，知道就知道，不知道就不知道，节约双方时间。

### 🔥1. Java

1. 线程安全集合: hashtable，vector, courrenthashmap
2. jdk1.7和1.8区别：没了解过=_=，脑袋突然断路。（增加了lambda表达式）
3. Java锁和底层原理：按不同类型划分，讲了synchronized和reentranlock，锁升级，aqs，可重入性
4. volatile: 禁止指令重排，有序，可见，内存屏障
5. hashmap的底层结构：数组 链表 红黑树

### 🔥2. 数据库

1. Binlog,redolog, undolog作用和区别：redolog一般用于数据恢复，binlog一般用于备份，保证数据的持久化。undo保证事务的原子性，一般用于事务回滚
2. 为什么要刷盘到redolog而不直接写入磁盘？：不知道=_=，上个问题给自己埋的坑（redo log是顺序IO,比直接刷盘的随机IO更快）
3. Mysql隔离级别，是否解决幻读: 默认可重复读，可重复读其实是没有解决幻读的，只能解决脏读。但是在MYSQL中，引入了MVCC，且开启了间隙锁，所以直接上是解决了幻读了的（感觉面试官是在引导我说出这些，自己讲的还是有点让人误解 参考链接：https://learnjava.baimuxym.cn/pages/%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E6%98%AF%E5%90%A6%E8%83%BD%E8%A7%A3%E5%86%B3%E5%B9%BB%E8%AF%BB%EF%BC%9F/）
4. Mysql锁，知道意向锁吗：按不同类型划分，讲了表锁行锁、X锁，S锁。意向锁就是协调表锁和行锁的，行加了什么锁，表就加什么锁。
5. Redis数据类型和数据结构：5种string,hash,list,set,zset。6种sds,inset,dict,quicklist,ziplist,skiplist。
6. Redis持久化：RDB和AOF和各种工作原理。（还问了个AOF相关的，没听过说不了解，就跳过了）

### 🔥3. 框架和中间件

1. 哪些分布式锁：redis-setnx, redission。
2. 知道zk的分布式锁吗?: 没了解过（跳）
3. jvm内存平时怎么调优：感觉自己答得很乱。实际是用jps或者arathas等命令排查异常线程，或者下载dump文件用jprofile分析等之类的操作
4. rabbitmq如何避免消息堆积，顺序性，消息模式：增加队列消费能力或线程池处理消息及时响应，提高消费能力顺序性：一个队列对应一个消费者，rabbitmq内部用队列来保证消息模式：一对一，一对多广播，还是就是topic主题参考链接：JavaGuide https://javaguide.cn/high-performance/message-queue/rabbitmq-questions.html#%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81-rabbitmq-%E6%B6%88%E6%81%AF%E7%9A%84%E9%A1%BA%E5%BA%8F%E6%80%A7



### 二面

1. 单纯介绍了下业务，没有讲到项目难点，jvm项目的优化和慢查询、业务问题的排查，最后面试官说项目没有亮点，唉，可惜，得重新整理下公司业务。
2. courrentHashmap-get为什么要弄成volatile: 不知道=_=（又是自己挖坑，本来只要说个头结点的synchronized加锁和cas自旋即可）
3. Kafka消息发送到broker的确认机制：ack=1默认成功，=0是只发一次，不管成功或失败，=-1是需要需要等到broker中所有副本成功写入的通知才算成功。







# 蚂蚁金服 

  **一面** 

  


  算法题，给了长度为 N 的有重复元素的数组，要求输出第 10 大的数。 

  


  需要在 2 小时内完成。 

  


  **二面** 

  


  自我介绍 

  


  目前在部门做什么，业务简单介绍下，内部有哪些系统，作用和交互过程说下 

  


  Dubbo 踩过哪些坑，怎么解决的？ 

  


  对线程安全的理解 

  


  乐观锁和悲观锁的区别？ 

  


  这两种锁在 Java 和 MySQL 分别是怎么实现的？ 

  


  事务有哪些特性？ 

  


  怎么理解原子性？ 

  


  HashMap 为什么不是线程安全的？ 

  


  怎么让 HashMap 变得线程安全？ 

  


  jdk1.8 对 ConcurrentHashMap 做了哪些优化？ 

  


  redis 主从机制了解么？怎么实现的？ 

  


  有过 GC 调优的经历么？ 

  


  有什么想问的 

  


  **三面** 

  


  自我介绍 

  


  接下来就是全部问的项目，对自己的项目细节逐个盘问，最后问了下如何改进方案 

  


  有什么想问我么？ 

  


  **四面** 

  


  介绍下自己 

  


  问项目 

  


  说说 Spring 的生命周期吧 

  


  说说 GC 的过程 

  


  强制 young gc 会有什么问题？ 

  


  知道 G1 么？ 

  


  回收过程是怎么样的？ 

  


  你提到的 Remember Set 底层是怎么实现的？ 

  


  CMS GC 有什么问题？ 

  


  怎么避免产生浮动垃圾？ 

  


  有什么想问的么？ 

  


  **五面** 

  


  HRBP 面，主要聊了部门在做的事情、职业发展、福利待遇等。阿里面试官有一票否决权，很看重你的价值观是否 match。 

  


  HR 面一定要诚实，不要说谎，只要你说谎 HR 都会去证实。 

  


  最后 HR 还对我说目前稳定性保障部挺缺人的，希望我尽快回复。 

#   小结 

  蚂蚁面试比较重视基础，所以 Java 那些基本功一定要扎实。 

#   拼多多 

  **一面** 

  


  聊项目 

  


  Java 中的 HashMap、TreeMap 解释下？ 

  


  TreeMap 查询写入的时间复杂度多少？ 

  


  ConcurrentHashMap 怎么实现线程安全的？ 

  


  HashMap 多线程有什么问题？怎么解决？ 

  


  CAS 和 synchronize 有什么区别？都用 synchronize 不行么？ 

  


  get 需要加锁么，为什么？ 

  


  volatile 的作用是什么？ 

  


  给我一张纸，画了一个九方格，都填了数字，给一个 MN 矩阵，从 1 开始逆时针打印这 MN 个数，要求时间复杂度尽可能低，可以先说下思路 

  


  有什么想问我的？ 

  


  **二面** 

  


  自我介绍下 

  


  手上还有其他 offer 么？ 

  


  部门组织结构是怎样的？ 

  


  系统有哪些模块，每个模块用了哪些技术，数据怎么流转的？给了我一张纸，我在上面简单画了下系统之间的流转情况 

  


  链路追踪的信息是怎么传递的？ 

  


  SpanId 怎么保证唯一性？ 

  


  RpcContext 是在什么维度传递的？ 

  


  Dubbo 的远程调用怎么实现的？ 

  


  Spring 的单例是怎么实现的？ 

  


  为什么要单独实现一个服务治理框架？ 

  


  谁主导的？内部还在使用么？ 

  


  逆向有想过怎么做成通用么？ 

  


  有什么想问的 

  


  **HR 面** 

  


  主要问了些职业发展、是否有其他 offer、以及入职意向等问题，顺便说了下公司的福利待遇等，手上有其他 offer 或者大厂经历会有一定加分。 

#   字节跳动 

  **一面** 

  


  自我介绍 

  


  聊项目 

  


  Redis 熟悉么，了解哪些数据结构? zset 底层怎么实现的? 

  


  红黑树了解么，时间复杂度? 

  


  既然两个数据结构时间复杂度都是 O(logN)，zset 为什么不用红黑树 

  


  线程池的线程数怎么确定？ 

  


  如果是 IO 操作为主怎么确定？ 

  


  如果计算型操作又怎么确定？ 

  


  跳表的查询过程是怎么样的，查询和插入的时间复杂度? 

  


  说下 Dubbo 的原理? 

  


  CAS 了解么？还了解其他同步机制么？ 

  


  做题：数组 A，2*n 个元素，n 个奇数、n 个偶数，设计一个算法，使得数组奇数下标位置放置的都是奇数，偶数下标位置放置的都是偶数。先说下你的思路 

  


  你有什么想问我的？ 

  


  **二面** 

  


  自我介绍 

  


  问项目 

  


  分布式追踪的上下文是怎么存储和传递的？ 

  


  SpringMVC 不同用户登录的信息怎么保证线程安全的？ 

  


  我们聊聊 mysql 吧，说下索引结构，为什么使用 B+树？ 

  


  Dubbo 的 RpcContext 是怎么传递的？主线程的 ThreadLocal 怎么传递到线程池？你说的内存泄漏具体是怎么产生的？ 

  


  线程池的线程是不是必须手动 remove 才可以回收 value？那你说的内存泄漏是指主线程还是线程池？ 

  


  什么是索引覆盖？ 

  


  Java 为什么要设计双亲委派模型？ 

  什么时候需要自定义类加载器？ 

  做题：手写一个对象池 

  有什么想问我的 

#   小结 

  头条的面试确实很专业，而且面试官最后给我了一点建议，就是研究技术的时候一定要结合技术的背景。

  面试官都有一个特点，会抓住一个值得深入的点或者你没说清楚的点深入下去直到你把这个点讲清楚，不然面试官会觉得你并没有真正理解。





